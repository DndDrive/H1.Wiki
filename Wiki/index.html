<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H1 Grossevache</title>
    <link rel="stylesheet" href="../style.css">
    <script type="text/javascript" src="../script/script.js"></script>
    <script type="text/javascript" src="../script/marked.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #1a202c; /* Default night mode */
            color: #fff;
            transition: background-color 0.3s, color 0.3s;
        }

        body.light-mode {
            background-color: #fff; /* Light mode background */
            color: #000;
        }

        header {
            background-color: #222;
            padding: 1rem;
            text-align: center;
        }

        header h1 {
            margin: 0;
            font-size: 2.5rem;
        }

        .content {
            padding: 20px;
            overflow: auto;
        }

        footer {
            background-color: #222;
            color: #bbb;
            text-align: center;
            padding: 10px;
            font-size: 0.9rem;
        }

        ul {
            padding: 0;
            list-style-type: none;
            text-align: center;
        }

        ul li {
            display: inline;
            margin: 0 15px;
        }

        ul li a {
            color: #4e9af1;
            text-decoration: none;
            font-size: 1.2rem;
        }

        ul li a:hover {
            text-decoration: underline;
        }

        /* Optional night mode styles for links in light mode */
        body.light-mode ul li a {
            color: #000;
        }
    </style>
</head>

<body>
    <div class="sidebar">
        <a href="../index.html">Grossevache</a>
        <a href="../Carte/index.html">Carte</a>
        <a href="index.html">Wiki</a>

        <div class="eye-container">
            <div class="eye">
                <div class="pupil"></div>
                <div class="blood-veins"></div>
            </div>
        </div>

        <script>
            const eye = document.querySelector('.eye');
            const pupil = document.querySelector('.pupil');
            const bloodVeins = document.querySelector('.blood-veins');

            document.addEventListener('mousemove', (event) => {
                // Get the mouse position relative to the eye container
                const eyeRect = eye.getBoundingClientRect();
                const eyeCenterX = eyeRect.left + eyeRect.width / 2;
                const eyeCenterY = eyeRect.top + eyeRect.height / 2;

                const mouseX = event.clientX;
                const mouseY = event.clientY;

                // Calculate the distance between the eye center and the mouse
                const deltaX = mouseX - eyeCenterX;
                const deltaY = mouseY - eyeCenterY;

                // Set maximum range of pupil and eye rotation to prevent excessive movement
                const maxRotation = 12;  // More dramatic rotation
                const maxPupilMovement = 10;  // Larger pupil movement for more unsettling effect

                // Calculate the angle between the center of the eye and the mouse
                const angleX = Math.min(Math.max((deltaY / eyeRect.height) * maxRotation, -maxRotation), maxRotation);
                const angleY = Math.min(Math.max(-(deltaX / eyeRect.width) * maxRotation, -maxRotation), maxRotation);

                // Update the eye's rotation
                eye.style.transform = `rotateX(${angleX}deg) rotateY(${angleY}deg)`;

                // Move the pupil within a limited range
                const pupilX = Math.min(Math.max((deltaX / eyeRect.width) * maxPupilMovement, -maxPupilMovement), maxPupilMovement);
                const pupilY = Math.min(Math.max((deltaY / eyeRect.height) * maxPupilMovement, -maxPupilMovement), maxPupilMovement);
                pupil.style.transform = `translate(-50%, -50%) translate(${pupilX}px, ${pupilY}px)`;

                // Bloodshot veins effect (flickering random animation for extra scare)
                if (Math.random() < 0.05) {
                    bloodVeins.style.animationDuration = `${Math.random() * 2 + 1}s`;
                }
            });
        </script>
    </div>
    <header class="header">
        H1 Grossevache
        <div class="toggle-container">
            <button class="toggle-button" onclick="toggleTheme()">Toggle Night Mode</button>
        </div>
    </header>
    <main>
        <ul>
            <li><a href="#" onclick="loadWikiPage('Home.md')">Home</a></li>
            <li><a href="#" onclick="loadWikiPage('Grandarbre.md')">Grandarbre</a></li>
            <li><a href="#" onclick="loadWikiPage('GrosGras.md')">GrosGras</a></li>
            <li><a href="#" onclick="loadWikiPage('PNJ-et-Objets-Magique.md')">PNJ et Objets Magiques</a></li>
            <li><a href="#" onclick="loadWikiPage('Regle-Supplémentaire.md')">Règles Supplémentaires</a></li>
        </ul>
        
        <div class="content" id="content">
            <p>Chargement...</p>
        </div>
        
        <script>
            const repoUrl = '../md/';
        
            function loadWikiPage(pageName) {
                fetch(repoUrl + pageName)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Page introuvable');
                        }
                        return response.text();
                    })
                    .then(markdown => {
                        document.getElementById('content').innerHTML = marked.parse(markdown);
                    })
                    .catch(error => {
                        document.getElementById('content').innerHTML = '<p>Erreur de chargement : ' + error.message + '</p>';
                    });
            }
        
            // Charger Home.md par défaut
            window.onload = function() {
                loadWikiPage('Home.md');
            };
        </script>
    </main>
</body>

</html>
